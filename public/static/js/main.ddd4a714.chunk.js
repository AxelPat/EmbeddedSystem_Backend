(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{185:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(13),c=a.n(r),i=a(38),s=a(50),o=a(123),u=a(240),l=a(75),d=a(18),j=a(239),h=a(241),b=a(29),p=a.n(b),f=a(51),m=a(124),O=a.n(m).a.create({baseURL:"http://localhost:7070/api"});O.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).jwtToken)),e}));var x=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.post("/auth/login",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.post("/auth/register",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=a(8),w=a(33),y=a(233),N=a(234),S=a(61),I=a(189),T=a(62),D=a(130),k=a.n(D),C=a(40),L=a.n(C),U=a(125),E=a(77),G=a.n(E),P=a(6),_=Object(w.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},dbName:{paddingRight:"20px"}}})),A=function(){var e=Object(n.useState)(L.a.get()),t=Object(v.a)(e,2),a=t[0],r=t[1],c=_(),s=Object(i.b)(),o=Object(d.f)(),u=function(){s({type:"LOGOUT"}),o.push("/"),r(null)};return Object(n.useEffect)((function(){var e=null===a||void 0===a?void 0:a.jwtToken;e&&(1e3*Object(U.a)(e).exp<G.a.now()&&u());r(L.a.get())}),[]),Object(P.jsx)("div",{className:c.root,children:Object(P.jsx)(y.a,{position:"static",children:Object(P.jsxs)(N.a,{children:[Object(P.jsx)(S.a,{edge:"start",className:c.menuButton,color:"inherit","aria-label":"menu",children:Object(P.jsx)(k.a,{})}),Object(P.jsx)(I.a,{variant:"h6",className:c.title,children:"Dashboard"}),Object(P.jsx)(I.a,{variant:"overline",className:c.dbName,children:a?a.db_id:""}),Object(P.jsx)(T.a,{color:"inherit",onClick:u,children:"Logout"})]})})})},B=a(87),F=a(95),W=function(){var e=Object(i.c)((function(e){return e.userData})).filter((function(e){return null!=e.userData})).map((function(e){var t={};return t.id=e.id,t.uid=e.uid,t.name=e.userData.name,t.temperature=e.temperature,t.status=e.status,t.createdAt=G()(e.createdAt).format("M/D/YYYY LT"),t}));return Object(P.jsx)(B.a,{elevation:3,children:Object(P.jsx)("div",{style:{height:500,width:"100%"},children:Object(P.jsx)(F.a,{rows:e,columns:[{field:"id",headerName:"id",hide:!0},{field:"uid",headerName:"UID",width:150},{field:"name",headerName:"Name",flex:1},{field:"temperature",headerName:"Temp",width:100},{field:"status",headerName:"Status",width:100},{field:"createdAt",headerName:"Time In",width:250,type:"dateTime"}],components:{Toolbar:F.b}})})})},Y=a(237),H=a(238),J=Object(w.a)({title:{fontSize:24,fontWeight:"bold"}}),R=function(){var e=Object(n.useState)((new Date).toLocaleString()),t=Object(v.a)(e,2),a=t[0],r=t[1],c=J();return Object(n.useEffect)((function(){var e=setInterval((function(){r((new Date).toLocaleString())}),1e3);return function(){return clearInterval(e)}}),[]),Object(P.jsx)(Y.a,{elevation:3,children:Object(P.jsxs)(H.a,{children:[Object(P.jsx)(I.a,{variant:"h5",className:c.title,gutterBottom:!0,children:"Current Time"}),Object(P.jsx)(I.a,{variant:"h6",color:"textSecondary",children:a})]})})},q=function(){var e=Object(i.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/user/records",{withCredentials:!0});case 3:a=e.sent,n=a.data,t({type:"FETCH_ALL",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(A,{}),Object(P.jsx)("div",{style:{paddingTop:"20px"},children:Object(P.jsxs)(j.a,{container:!0,justify:"center",alignItems:"flex-start",spacing:2,children:[Object(P.jsx)(j.a,{item:!0,sm:12,xs:12,lg:9,children:Object(P.jsx)(W,{})}),Object(P.jsx)(h.a,{only:["sm","xs","md"],children:Object(P.jsx)(j.a,{item:!0,lg:!0,children:Object(P.jsx)(R,{})})})]})})]})},z=a(45),M=a(41),K=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),Q=a(139),V=function(e){var t=e.name,a=e.handleChange,n=e.autofocus,r=e.label,c=e.type;e.handleShowPassword;return Object(P.jsx)(j.a,{item:!0,xs:12,children:Object(P.jsx)(Q.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:r,autoFocus:n,type:c})})},X=function(){var e=Object(n.useState)({username:"",password:"",confirmPassword:"",db_id:""}),t=Object(v.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(v.a)(c,2),o=s[0],l=s[1],h=Object(n.useState)(!1),b=Object(v.a)(h,2),m=b[0],O=b[1],w=K(),y=Object(i.b)(),N=Object(d.f)(),S=function(e){r(Object(M.a)(Object(M.a)({},a),{},Object(z.a)({},e.target.name,e.target.value)))};return Object(P.jsx)(u.a,{component:"main",maxWidth:"xs",children:Object(P.jsxs)(B.a,{className:w.paper,elevation:3,children:[Object(P.jsx)(I.a,{variant:"h4",children:m?"SIGN UP":"SIGN IN"}),Object(P.jsxs)("form",{autoComplete:"off",className:w.form,onSubmit:function(e){e.preventDefault(),y(m?function(e,t){return function(){var a=Object(f.a)(p.a.mark((function a(n){var r,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g(e);case 3:r=a.sent,c=r.data,n({type:"SIGNUP",payload:c}),t.push("/home"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0.message);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,N):function(e,t){return function(){var a=Object(f.a)(p.a.mark((function a(n){var r,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x(e);case 3:r=a.sent,c=r.data,n({type:"SIGNIN",payload:c}),t.push("/home"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0.message);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(a,N))},children:[Object(P.jsxs)(j.a,{container:!0,spacing:2,children:[Object(P.jsx)(V,{name:"username",label:"Username",handleChange:S,autoFocus:!0}),m&&Object(P.jsx)(V,{name:"db_id",label:"DB ID",handleChange:S}),Object(P.jsx)(V,{name:"password",label:"Password",handleChange:S,type:o?"text":"password",handleShowPassword:function(){return l((function(e){return!e}))}}),m&&Object(P.jsx)(V,{name:"confirmPassword",label:"Confirm Password",handleChange:S,type:"password"})]}),Object(P.jsx)(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:w.submit,children:m?"Sign Up":"Sign In"}),Object(P.jsx)(j.a,{container:!0,justify:"flex-end",children:Object(P.jsx)(j.a,{item:!0,children:Object(P.jsx)(T.a,{onClick:function(){O((function(e){return!e})),l(!1)},children:m?"Have an account? Sign In":"Don't have an account? Sign Up"})})})]})]})})},Z=function(){return Object(P.jsx)(l.a,{children:Object(P.jsx)(u.a,{maxWidth:"lg",children:Object(P.jsxs)(d.c,{children:[Object(P.jsx)(d.a,{path:"/",exact:!0,component:X}),Object(P.jsx)(d.a,{path:"/home",exact:!0,component:q})]})})})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.payload;case"UPDATE":case"DELETE":return e;default:return[]}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNIN":case"SIGNUP":return L.a.set("db_id",t.payload.db_id,{path:"/"}),L.a.set("jwtToken",t.payload.jwtToken,{path:"/"}),Object(M.a)(Object(M.a)({},e),{},{authData:t.payload});case"LOGOUT":return L.a.remove("db_id",{path:"/"}),L.a.remove("jwtToken",{path:"/"}),Object(M.a)(Object(M.a)({},e),{},{authData:null});default:return e}},te=Object(s.c)({userData:$,signIn:ee}),ae=Object(s.e)(te,Object(s.d)(Object(s.a)(o.a)));c.a.render(Object(P.jsx)(i.a,{store:ae,children:Object(P.jsx)(Z,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.ddd4a714.chunk.js.map